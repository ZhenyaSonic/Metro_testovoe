<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Московский Транспорт</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="mosmetro_logo_full.png" alt="Московский метрополитен" class="header-brand-logo">
        </div>
        <nav>
            <a href="#" id="nav-main">Главная</a>
            <a href="#" id="nav-posts">Посты</a>
            <a href="#" id="nav-users">Пользователи</a>
        </nav>
        <div class="auth-buttons" style="display: flex; gap: 10px;">
            <button id="login-btn" style="display: none;">Войти</button>
            <button id="register-btn" style="display: none;">Регистрация</button>
            <button id="logout-btn" style="display: none;">Выйти</button>
        </div>
    </header>
    <main>
        <!-- Секция "Главная" -->
        <section id="main-section" class="content-section">
            <h2 id="main-header">Добро пожаловать!</h2>
            <div id="profile-view-container" class="profile-view" style="display: none;">
                <div class="profile-photo-placeholder">
                    <img id="main-avatar" src="" alt="Аватар" style="width:150px; height:150px; border-radius:50%; object-fit: cover; border: 2px solid #eee;">
                    <!-- ФОРМА ДЛЯ ЗАГРУЗКИ АВАТАРА -->
                    <form id="avatar-upload-form" style="margin-top: 10px;">
                        <input type="file" id="avatar-upload-input" accept="image/*" style="display: none;">
                        <button type="button" id="change-avatar-btn">Сменить фото</button>
                        <button type="submit" id="save-avatar-btn" style="display: none;">Сохранить</button>
                    </form>
                </div>
                <div class="profile-info">
                    <p><strong>ФИО:</strong> <span id="main-fio">[Данные пользователя]</span></p>
                    <p><strong>Email:</strong> <span id="main-email"></span></p>
                    <p><strong>Адрес:</strong> <span id="main-address"></span></p>
                    <!-- КНОПКА РЕДАКТИРОВАНИЯ ПРОФИЛЯ -->
                    <button id="edit-profile-btn" style="margin-top: 15px;">Редактировать профиль</button>
                </div>
            </div>
            <p id="welcome-message">Для начала работы, пожалуйста, <a href="#" id="login-link">войдите в систему</a> или <a href="#" id="register-link">зарегистрируйтесь</a>.</p>
        </section>

        <!-- Секция "Посты"  -->
        <section id="posts-section" class="content-section" style="display: none;">
            <h2>Посты</h2>
            <div class="controls">
                <button id="show-create-post-form">Создать новый пост</button>
            </div>
            <div id="create-post-form-container" style="display:none; margin-bottom: 20px; padding:15px; border:1px solid #eee;">
                <h3>Создать пост</h3>
                <input type="text" id="post-title" placeholder="Заголовок поста" required><br><br>
                <textarea id="post-content" placeholder="Содержание поста" rows="4" required></textarea><br><br>
                <button id="submit-create-post">Сохранить пост</button>
                <button id="cancel-create-post">Отмена</button>
            </div>
            <div id="posts-list">
                <!-- Посты будут загружены сюда -->
            </div>
        </section>

        <!-- Секция "Пользователи" -->
        <section id="users-section" class="content-section" style="display: none;">
            <h2>Пользователи</h2>
             <div class="controls">
                <button id="show-register-form-btn">Зарегистрировать нового пользователя</button>
            </div>
            <div id="register-form-container" style="display:none; margin-bottom: 20px; padding:15px; border:1px solid #eee;">
                <h3>Регистрация нового пользователя</h3>
                <input type="text" id="user-fio-create" placeholder="ФИО" required><br><br>
                <input type="email" id="user-email-create" placeholder="Email" required><br><br>
                <input type="password" id="user-password-create" placeholder="Пароль" required><br><br>
                <input type="text" id="user-address-create" placeholder="Адрес"><br><br>
                <button id="submit-register-user">Зарегистрировать</button>
                <button id="cancel-register-user">Отмена</button>
            </div>
            <div id="users-list"></div>
        </section>
    </main>
    
    <!-- МОДАЛЬНОЕ ОКНО ДЛЯ РЕДАКТИРОВАНИЯ ПРОФИЛЯ -->
    <div id="edit-post-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="close-edit-post-modal-btn">×</span>
            <h3>Редактирование поста</h3>
            <form id="edit-post-form">
                <input type="hidden" id="edit-post-id">
                <p><strong>Заголовок:</strong> <input type="text" id="edit-post-title" required></p>
                <p><strong>Содержание:</strong></p>
                <textarea id="edit-post-content" rows="5" required style="width: 95%;"></textarea>
                <button type="submit">Сохранить изменения</button>
            </form>
        </div>
    </div>

    <!-- МОДАЛЬНОЕ ОКНО ДЛЯ РЕДАКТИРОВАНИЯ ПОСТА -->
    <div id="edit-post-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="close-edit-post-modal-btn">×</span>
            <h3>Редактирование поста</h3>
            <form id="edit-post-form">
                <input type="hidden" id="edit-post-id">
                <p><strong>Заголовок:</strong> <input type="text" id="edit-post-title" required></p>
                <p><strong>Содержание:</strong></p>
                <textarea id="edit-post-content" rows="5" required style="width: 95%;"></textarea>
                <button type="submit">Сохранить изменения</button>
            </form>
        </div>
    </div>

    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="close-login-modal-button">×</span>
            <h3>Вход в систему</h3>
            <form id="login-form">
                <p><strong>Email:</strong> <input type="email" id="login-email" required></p>
                <p><strong>Пароль:</strong> <input type="password" id="login-password" required></p>
                <button type="submit">Войти</button>
            </form>
        </div>
    </div>
    <footer>
        <img src="mosmetro_logo_full.png" alt="Московский Метрополитен" class="footer-brand-logo">
        <span>ГУП Московский метрополитен</span>
    </footer>
    <script src="script.js"></script>
</body>
</html>